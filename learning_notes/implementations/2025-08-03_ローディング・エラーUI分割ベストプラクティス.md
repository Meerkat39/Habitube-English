# ローディング・エラー UI 分割のベストプラクティス（React/Next.js）

## 📅 学習日時

2025 年 8 月 3 日

## ✅ 結論

ローディング・エラー表示は専用コンポーネント（Loading, ErrorMessage）として分割することで、再利用性・保守性・拡張性が向上する。

## 🧠 詳細

### 分割理由

- UI/UX の統一・デザイン調整が容易
- 複数画面で再利用可能
- テストや機能拡張（スピナー、詳細エラー、再試行ボタン等）が簡単

### 実装例

```tsx
// Loading.tsx（中央配置・スピナー付き）
export default function Loading() {
  return (
    <div
      style={{
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center",
        height: "40vh",
      }}
    >
      <div
        style={{
          width: 48,
          height: 48,
          border: "6px solid #eee",
          borderTop: "6px solid #3b82f6",
          borderRadius: "50%",
          animation: "spin 1s linear infinite",
        }}
      />
      <style>{`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}</style>
      <div style={{ marginTop: 16, fontSize: "1.1rem", color: "#555" }}>
        読み込み中...
      </div>
    </div>
  );
}

// ErrorMessage.tsx（中央・赤色表示）
interface ErrorMessageProps {
  message: string;
}
export default function ErrorMessage({ message }: ErrorMessageProps) {
  return (
    <div style={{ color: "red", textAlign: "center", margin: "2rem 0" }}>
      {message}
    </div>
  );
}

// page.tsxでの利用
if (loading) return <Loading />;
if (error) return <ErrorMessage message={error} />;
```

### 備考

- 今後デザインや機能拡張も容易
- 小単位で段階的に実装・知見記録する運用が有効
